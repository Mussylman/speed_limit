# === Общие параметры ===
output_dir: "outputs"
show_window: true
fps: 30
device: "cuda"
frame_skip: 2  # обрабатывать каждый N-й кадр

# === YOLO ===
models:
  yolo_model: "models/yolo11n.engine"
yolo_imgsz: 640  # 640=быстро, 960=баланс, 1280=качество

# === Метод измерения скорости ===
speed_method: "homography"  # "homography" или "lines"
speed_limit: 70  # км/ч, превышение = нарушение

homography:
  config_file: "config/homography_config.yaml"
  min_track_points: 5
  smoothing_window: 10
  max_speed_kmh: 200
  min_speed_kmh: 5
  show_bird_eye: true
  speed_correction: 0.50

# =============================================================
# === OCR ФИЛЬТРЫ (чтобы не гонять OCR на каждом кадре) ===
# =============================================================

# --- Фильтр по размеру МАШИНЫ ---
# OCR запускается только если машина достаточно большая (близко к камере)
min_car_height: 80    # мин. высота bbox машины (px). Меньше = далеко, OCR не нужен
min_car_width: 60     # мин. ширина bbox машины (px)

# --- Фильтр по размеру НОМЕРА ---
# После детекции номера проверяем его размер
min_plate_width: 40   # мин. ширина номерной таблички (px). Меньше = не читаемо
min_plate_height: 10  # мин. высота номерной таблички (px)

# --- Фильтр по качеству OCR ---
min_plate_chars: 8    # мин. символов в номере (KZ=8)
ocr_conf_threshold: 0.5  # мин. уверенность OCR для принятия результата

# --- Фильтр по формату номера (regex) ---
# KZ формат: 123ABC01 (3 цифры + 3 буквы + 2 цифры региона)
plate_format_regex: "^[0-9]{3}[A-Z]{3}[0-9]{2}$"

# --- Интервал между OCR попытками ---
ocr_cooldown_frames: 3  # пропускать N кадров между OCR для одной машины (экономия GPU)

# =============================================================
# === Зоны для линейного метода скорости ===
# =============================================================
line_zones:
  - name: "Down"
    start_line: [[903, 133], [1346, 170]]
    end_line: [[183, 504], [651, 643]]
    distance_m: 10
    direction: "down"
    color: [0, 255, 0]

  - name: "Up"
    start_line: [[1703, 812], [725, 601]]
    end_line: [[1923, 323], [1214, 265]]
    distance_m: 10
    direction: "up"
    color: [255, 0, 0]
